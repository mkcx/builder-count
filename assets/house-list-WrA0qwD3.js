import{_ as N,k as O,u as P,f as A,g as y,l as F,n as M,p as J,r as a,o as _,c as m,d as s,a as i,F as W,b as j,w as r,t as b,m as f,e as w,s as z}from"./index-7Vuxo2L6.js";import{e as G,s as K}from"./Export2Excel-gLb2Sem2.js";const Q={class:"house-list"},X={class:"houses"},Y=["onClick"],Z={class:"house__name fx-1"},ee={class:"fs-0"},te={class:"footer"},oe={class:"form-wrap"},se={class:"form__title"},ne={style:{margin:"16px"}},ae={__name:"house-list",setup(ie){const l=O(),v=P(),u=A(),c=y(!1),t=F({buildingId:u.query.id,uniqid:"",name:""}),p=M(()=>{const e=u.query.id;return l.state.square.house.filter(o=>o.buildingId===e)}),d=y({}),x=async()=>{const e=u.query.id;p.value=await l.dispatch("square/getHouses",{id:e})},E=async()=>{const e=u.query.id;d.value=await l.dispatch("square/getBuilding",{id:e})},H=()=>{if(t.name.trim()===""){z("请输入房间名称");return}t.uniqid?l.commit("square/UPDATE_HOUSE",t):l.commit("square/ADD_HOUSE",t),c.value=!1},D=e=>{K({title:"温馨提示",message:"删除后无法恢复，请确认是否删除？"}).then(()=>{l.commit("square/DELETE_HOUSE",{uniqid:e})}).catch(()=>{})},V=e=>{t.uniqid=e.uniqid,t.name=e.name,c.value=!0},$=()=>{v.back()},B=()=>{G({header:{name:"房间名称",square:"面积"},data:[{name:"暂无数据",square:"暂无数据"}],key:["name","square"],title:"",filename:`${d.value.name}-房间列表`,autoWidth:!1})};function L(){c.value=!0}function S(e){v.push({name:"houseEdit",query:{id:e.uniqid,name:e.name}})}return J(()=>{E(),x()}),(e,o)=>{var k;const h=a("van-nav-bar"),q=a("van-icon"),g=a("van-button"),T=a("van-field"),U=a("van-cell-group"),R=a("van-form"),I=a("van-overlay");return _(),m("div",Q,[s(h,{class:"fs-0",title:`${((k=d.value)==null?void 0:k.name)||""}-房间列表`,"left-text":"返回","right-text":"导出","left-arrow":"",onClickLeft:$,onClickRight:B},null,8,["title"]),i("div",X,[(_(!0),m(W,null,j(p.value,n=>(_(),m("div",{class:"house flex ai-c",onClick:C=>S(n)},[i("div",Z,b(n.name),1),i("div",ee,[s(q,{class:"mr-10",name:"edit",onClick:f(C=>V(n),["stop"])},null,8,["onClick"]),s(q,{name:"delete-o",color:"red",onClick:f(C=>D(n.uniqid),["stop"])},null,8,["onClick"])])],8,Y))),256))]),i("div",te,[s(g,{class:"btn",type:"primary",icon:"plus",onClick:L},{default:r(()=>[w(" 新建房间 ")]),_:1})]),s(I,{show:c.value,onClick:o[2]||(o[2]=n=>c.value=!1)},{default:r(()=>[i("div",oe,[s(R,{class:"form",onClick:o[1]||(o[1]=f(()=>{},["stop"]))},{default:r(()=>[i("div",se,b(t.uniqid?"编辑":"新增")+"房间",1),s(U,{inset:""},{default:r(()=>[s(T,{modelValue:t.name,"onUpdate:modelValue":o[0]||(o[0]=n=>t.name=n),label:"房间名称",placeholder:"请输入房间名称",class:"form__input"},null,8,["modelValue"])]),_:1}),i("div",ne,[s(g,{round:"",block:"",type:"primary",onClick:H},{default:r(()=>[w(" 确认 ")]),_:1})])]),_:1})])]),_:1},8,["show"])])}}},re=N(ae,[["__scopeId","data-v-14135cac"]]);export{re as default};
