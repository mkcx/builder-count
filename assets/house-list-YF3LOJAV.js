import{_ as R,k as D,u as I,f as S,g as h,l as F,n as M,p as T,r as s,o as _,c as m,d as o,a as n,F as U,b as $,w as a,t as A,e as g,m as O,s as j}from"./index-4Ckk7gxa.js";const z={class:"house-list"},G={class:"houses"},J={class:"house__name"},K={class:"footer"},P={class:"form-wrap"},Q={style:{margin:"16px"}},W={__name:"house-list",setup(X){const l=D(),v=I(),d=S(),i=h(!1),c=F({name:""}),f=M(()=>{const e=d.query.id;return l.state.square.house.filter(t=>t.buildingId===e)}),u=h({}),k=async()=>{const e=d.query.id;f.value=await l.dispatch("square/getHouses",{id:e})},b=async()=>{const e=d.query.id;u.value=await l.dispatch("square/getBuilding",{id:e})},y=()=>{if(c.name.trim()===""){j("请输入房间名称");return}const e={name:c.name,buildingId:u.value.uniqid,buildingName:u.value.name};l.commit("square/ADD_HOUSE",e),i.value=!1},w=()=>{v.back()},C=()=>{alert("导出成功")};function q(){i.value=!0}function x(){v.push({name:"houseEdit"})}return T(()=>{b(),k()}),(e,t)=>{const V=s("van-nav-bar"),B=s("van-icon"),p=s("van-button"),E=s("van-field"),H=s("van-cell-group"),L=s("van-form"),N=s("van-overlay");return _(),m("div",z,[o(V,{class:"fs-0",title:`${u.value.name}-房间列表`,"left-text":"返回","right-text":"导出","left-arrow":"",onClickLeft:w,onClickRight:C},null,8,["title"]),n("div",G,[(_(!0),m(U,null,$(f.value,r=>(_(),m("div",{class:"house",onClick:x},[n("div",J,A(r.name),1),o(B,{name:"arrow"})]))),256))]),n("div",K,[o(p,{class:"btn",type:"primary",icon:"plus",onClick:q},{default:a(()=>[g(" 新建房间 ")]),_:1})]),o(N,{show:i.value,onClick:t[2]||(t[2]=r=>i.value=!1)},{default:a(()=>[n("div",P,[o(L,{class:"form",onClick:t[1]||(t[1]=O(()=>{},["stop"]))},{default:a(()=>[o(H,{inset:""},{default:a(()=>[o(E,{modelValue:c.name,"onUpdate:modelValue":t[0]||(t[0]=r=>c.name=r),label:"房间名称",placeholder:"请输入房间名称",class:"form__input"},null,8,["modelValue"])]),_:1}),n("div",Q,[o(p,{round:"",block:"",type:"primary",onClick:y},{default:a(()=>[g(" 确认 ")]),_:1})])]),_:1})])]),_:1},8,["show"])])}}},Z=R(W,[["__scopeId","data-v-afceca46"]]);export{Z as default};
